{{define "content"}}
<div>
    <div class="mb-1">
        <a href="/orgs" class="link">&larr; Back to Organizations</a>
    </div>

    <div class="page-header mb-2">
        <div>
            <h2 class="mb-1">{{.Data.OrgName}} Projects</h2>
            <p class="text-muted mb-0">Manage projects for this organization</p>
        </div>
        {{if .Data.CanMutate}}
        <a href="/orgs/{{.Data.OrgID}}/projects/new" class="btn btn-primary">Create Project</a>
        {{end}}
    </div>

    {{if .Error}}
    <div class="error">{{.Error}}</div>
    {{end}}

    {{if .Data.Projects}}
    <div class="card-grid">
        {{range .Data.Projects}}
        <div class="card">
            <div class="card-row">
                <div>
                    <h3 class="mb-1">{{.Name}}</h3>
                    <div class="text-muted mb-1">Slug: <span class="code-pill">{{.Slug}}</span></div>
                    <div class="text-muted">Default branch: <span class="code-pill">{{.DefaultBranch}}</span></div>
                </div>
                <div>
                    <a href="/orgs/{{$.Data.OrgID}}/projects/{{.ID}}/settings" class="btn btn-muted btn-sm">Settings</a>
                </div>
            </div>
        </div>
        {{end}}
    </div>
    {{else}}
    <div class="empty-state">
        <p class="mb-1">No projects yet.</p>
        {{if .Data.CanMutate}}
        <p class="mb-0">Create your first project to get started.</p>
        {{end}}
    </div>
    {{end}}
</div>
{{end}}
